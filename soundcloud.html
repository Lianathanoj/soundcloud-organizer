<!DOCTYPE HTML>
<html>
<head>
    <script src="https://connect.soundcloud.com/sdk/sdk-3.1.2.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.0.js"   integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="   crossorigin="anonymous"></script>
    <script>
    SC.initialize({
      client_id: 'e8f229ff62df70ca77ff05cf6f458d83',
      redirect_uri: 'file:///C:/Users/Jonathan/Documents/GitHub/soundcloud-organizer/callback.html' // USE THIS FOR LOCAL TESTING OF OAUTH
    });

    // oauth probably not even necessary
    // initiate auth popup
    // SC.connect().then(function() {
      // return SC.get('/me');
    // }).then(function(me) {
      // alert('Hello, ' + me.username);
    // });
    
    // console.log(SC.get("/resolve/?url=https://soundcloud.com/oshi/tracks"));
    
    // function compareTo(x, y) { // TODO: correctly sorts ascending
        // return x.favoritings_count - y.favoritings_count;
    // }
    
    $(document).ready(function() {
        SC.get("/resolve/?url=https://soundcloud.com/oshi/tracks").then(function(tracks) {
            tracks.sort(function(x, y) {
                return y.favoritings_count - x.favoritings_count;
            });
            for (var i = 0; i < tracks.length; i++) {
              if (i < 5) {
              console.log(tracks[i]);
              SC.oEmbed(tracks[i].permalink_url, {maxheight: 200}).then(function(widget) { // keep maxheight low for faster loading
                $("table").append("<tr><td>" + widget.html + "</td></tr>");
              });
              }
            }
        });
    });   
    
    // playlists??
    
    // reorder XML to appear in diff. order?
    // TODO: implement quicksort in JS to sort tracks by maxCout to minCount then display tracks on webpage
    
  
  
    </script>
</head>

<body>
    <table></table>
</body> 
</html>
